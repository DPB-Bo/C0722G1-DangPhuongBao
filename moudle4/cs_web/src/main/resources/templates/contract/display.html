<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
            crossorigin="anonymous">

    <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
</head>
<body>
<div th:insert="fragments/header_footer :: header"></div>

<div class="container mt-4 content">
    <div class="row">
        <h1 class="text-center text-decoration-underline
                    col">CONTRACT LIST</h1>
        <button type="button" class="btn btn-primary
                    col-sm-1 ms-auto mb-4"
                data-bs-toggle="modal"
                data-bs-target="#addContract">ADD
        </button>
    </div>
    <table class="table mb-5 table-striped table-borderless
                table-hover text-center">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Facility Name</th>
            <th scope="col">Customer Name</th>
            <th scope="col">Employee Name</th>
            <th scope="col">Start Date</th>
            <th scope="col">End Date</th>
            <th scope="col">Deposit</th>
            <th scope="col">Total Payment</th>
            <th colspan="2" class="text-start">Attach Facilities</th>
        </tr>
        </thead>
        <tbody id="tbodyDisplay">
        <!--        <tr>-->
        <!--            <th scope="row"></th>-->
        <!--            <td></td>-->
        <!--            <td></td>-->
        <!--            <td></td>-->
        <!--            <td></td>-->
        <!--            <td></td>-->
        <!--            <td></td>-->
        <!--            <td><button type="button" class="btn btn-primary"-->
        <!--                        data-bs-toggle="modal"-->
        <!--                        data-bs-target="#addFreeService">+</button></td>-->
        <!--            <td><button type="button" class="btn btn-primary"-->
        <!--                        data-bs-toggle="modal"-->
        <!--                        data-bs-target="#showFreeService">List Attach Facilities</button></td>-->
        <!--        </tr>-->
        </tbody>
    </table>
</div>

<div th:insert="fragments/header_footer :: footer"></div>
</body>
<script>
    let mainView = 'http://localhost:8080/contract';
    let pageURL = "?page="
    let pageNumber = 0;

    function loadDataContract(page) {
        $.ajax({
            type: 'GET',
            url: mainView + pageURL + page,
            dataType: 'json',
            success: function (data) {
                let list = data.content;
                let viewData = "";
                for (let i = 0; i < list.length; i++) {
                    viewData +=
                        `
                            <tr>
                            <td>${i + 1}</td>
                            <td>${list[i].facility.name}</td>
                            <td>${list[i].customer.name}</td>
                            <td>${list[i].employee.name}</td>
                            <td>${list[i].startDate}</td>
                            <td>${list[i].endDate}</td>
                            <td>${list[i].deposit}</td>
                            <td>a</td>
                            <td>a</td>
                            <td>a</td>
                            </tr>
                            `
                }
                $("#tbodyDisplay").append(viewData);
            }
        })
    }

    $(function () {
        loadDataContract(pageNumber);
    })
</script>
</html>